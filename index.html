<!DOCTYPE html>
<html>
<head>
    <title>Flying Bats</title>
</head>
<body id="body" onload="getValues()">
	<div></div>
	<!-- <div id="header">
		HALLOWEEN SIGN UP
	</div> -->
	
	<div id="parallax-container" class="parllax-container">
		<div id="orange" class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-01.svg">
		</div>
		<div id="stars" class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-02.svg">
		</div>
		<div id="moon"class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-03.svg">
		</div>
		<div id="clouds" class="backParallax">
			<!-- <div class="x1">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-01.svg?raw=true" class="cloud">
			</div>
			<div class="x2">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-02.svg?raw=true" class="cloud">
			</div>
			<div class="x3">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-03.svg?raw=true" class="cloud">
			</div>
			<div class="x4">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-04.svg?raw=true" class="cloud">
			</div>
			<div class="x5">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-05.svg?raw=true" class="cloud">
			</div> -->
		</div>
		<div id="backtrees" class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-04.svg">
		</div>
		<div id="fronttrees" class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-05.svg">
		</div>
		<div id="house" class="backParallax">
			<img src="https://raw.githubusercontent.com/jac21984/Halloween/main/media/background/background-06.svg">
		</div>
	</div>
	<div id="blackout" class="blackout"></div>
	
<!-- 	<div id="clouds">
		<div id="background-wrap">
			<div class="x1">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-01.png?raw=true" class="cloud">
			</div>
			<div class="x2">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-02.png?raw=true" class="cloud">
			</div>
			<div class="x3">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-03.png?raw=true" class="cloud">
			</div>
			<div class="x4">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-04.png?raw=true" class="cloud">
			</div>
			<div class="x5">
				<img src="https://github.com/jac21984/Halloween/blob/main/media/clouds/cloud-05.png?raw=true" class="cloud">
			</div>
		</div>
	</div> -->
	
<!-- 	<div id="forms">
		<form class="form-horizontal">
			<fieldset> -->

				<!-- Text input -->
<!-- 				<div class="form-group">
				  <label class="col-md-4 control-label" for="name">Name</label>  
				  <div class="col-md-4">
				  <input id="name" name="name" type="text" placeholder="" class="form-control input-md" required="">
					
				  </div>
				</div> -->

				<!-- Text input -->
<!-- 				<div class="form-group">
				  <label class="col-md-4 control-label" for="item">Whatcha Bringing</label>  
				  <div class="col-md-4">
				  <input id="item" name="item" type="text" placeholder="" class="form-control input-md">
					
				  </div>
				</div> -->

				<!-- Button -->
<!--				<div class="form-group">
				  <label class="col-md-4 control-label btn-label" for="submit"></label>
				  <div class="col-md-4">
					<button id="submit" name="submit" class="submit">Submit</button>
				  </div>
				</div>

 			</fieldset>
		</form>
		<table id="list" class="list">
		</table>
	</div> --->

</body>
</html>

<style>

html,body,#parallax-container{
	background-color: black;
	background-size: cover;
	margin: 0;
	padding: 0;
	overflow-x: hidden;
	min-height: 120vh;
}

#parallax-container{
	position: relative;
	width: 225%;
	height: 200%;
	padding: 0;
	margin: 0;

}

#parallax-container div {
	position: fixed;
	padding: 0;
	margin: 0;
	width: 225vw;
	height: 225vw;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);	
}

.blackout{
	background-color: black;
	background-size: cover;
	width: 100vw;
	margin: 0;
	padding: 0;
	position: fixed;
	
	bottom: 0px;
	z-index: 8;
}

#orange{
	
	z-index: 0;
}

#stars{
	
	z-index: 1;
}

#moon{
	
	z-index: 2;
}

#clouds{
	
	z-index: 3;
}

#backtrees{
	
	z-index: 4;
}

#fronttrees{
	
	z-index: 5;
}

#house{
	
	z-index: 6;
}

#clouds{

	width: 100vw;
	height: 95vw;

}

.cloud{
	
}

.bats{
	z-index: 10;
}

.bat{
	width: 4vw;
}

.x1{
	position: absolute;
	top: 10vh;
	
	animation-name: animateCloud;
	animation-duration: 300s;
	animation-iteration-count: infinite;
	animation-timing-function: linear;
	animation-delay: 0s;
	
	transform: scale(.25);
}


@media screen and (max-height: 100vw) {
	#parallax-container div{
		width: 210vh;
		height:210vh;
	}

}



</style>

<script>
		
		let baseHeight = 0;
		let parent = "";
		let currentYVal = [];
		let currentXVal = [];
		let currentHVal = [];
		
		function getValues(){
			parent = document.getElementById("parallax-container");
			baseHeight = parent.clientHeight;
			let children = document.getElementsByClassName("backParallax");
			let blackout = document.getElementById("blackout");
			console.log(blackout);
			
			for(let i = 0; i < children.length; i++) {
					currentYVal[i] = children[i].offsetTop;
					currentXVal[i] = children[i].offsetLeft;
					currentHVal[i] = parent.offsetHeight;
					
			};
		
			window.onscroll = function() {parallaxscroll()};

			function parallaxscroll () {
				let transYChange = [];
				let transYNew = [];
				let newtransYVal = [];
				for(let i = 0; i < children.length; i++) {
					let translateYVal = ((window.pageYOffset * i / children.length)*2);
					transYChange[i] = translateYVal;
					newtransYVal = ((((translateYVal+currentYVal[i])/currentHVal[i])*100)+(50-((currentYVal[i]/currentHVal[i])*100)));
					transYNew[i] = newtransYVal;
					children[i].style.transform =  "translate(-50%, -" + newtransYVal + "%)";
					if(i==(children.length-1)){
						let house = document.getElementById(children[i].id);
						let boundingRect = house.getBoundingClientRect();
						let bottomY  = boundingRect.bottom;
						blackout.style.top = bottomY + "px";
					}
				};
			}
		}
		
		function reportWindowSize() {
						let house = document.getElementById("house");
						let blackout = document.getElementById("blackout");
						let boundingRect = house.getBoundingClientRect();
						let bottomY  = boundingRect.bottom;
						blackout.style.top = bottomY + "px";
		}

		window.onresize = reportWindowSize;
		
	const bats = 10;
	
	for (let i = 0; i < bats; i++) {
		/*! JS Bat 2013 - v1.2 - Eric Grange - www.delphitools.info */
		;(function () {
		var r=Math.random,n=0,d=document,w=window,
			i=d.createElement('img'),
			z=d.createElement('div'),
			zs=z.style,
			a=w.innerWidth*r(),b=w.innerHeight*r();
		zs.position="fixed";
		zs.left=0;
		zs.top=0;
		zs.opacity=0;
		z.className="bats";
		i.className="bat";
		z.appendChild(i);
		i.src='data:image/gif;base64,R0lGODlhMAAwAJECAAAAAEJCQv///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQACACwAAAAAMAAwAAACdpSPqcvtD6NcYNpbr4Z5ewV0UvhRohOe5UE+6cq0carCgpzQuM3ut16zvRBAH+/XKQ6PvaQyCFs+mbnWlEq0FrGi15XZJSmxP8OTRj4DyWY1lKdmV8fyLL3eXOPn6D3f6BcoOEhYaHiImKi4yNjo+AgZKTl5WAAAIfkECQEAAgAsAAAAADAAMAAAAnyUj6nL7Q+jdCDWicF9G1vdeWICao05ciUVpkrZIqjLwCdI16s+5wfck+F8JOBiR/zZZAJk0mAsDp/KIHRKvVqb2KxTu/Vdvt/nGFs2V5Bpta3tBcKp8m5WWL/z5PpbtH/0B/iyNGh4iJiouMjY6PgIGSk5SVlpeYmZqVkAACH5BAkBAAIALAAAAAAwADAAAAJhlI+py+0Po5y02ouz3rz7D4biSJbmiabq6gCs4B5AvM7GTKv4buby7vsAbT9gZ4h0JYmZpXO4YEKeVCk0QkVUlw+uYovE8ibgaVBSLm1Pa3W194rL5/S6/Y7P6/f8vp9SAAAh+QQJAQACACwAAAAAMAAwAAACZZSPqcvtD6OctNqLs968+w+G4kiW5omm6ooALeCusAHHclyzQs3rOz9jAXuqIRFlPJ6SQWRSaIQOpUBqtfjEZpfMJqmrHIFtpbGze2ZywWu0aUwWEbfiZvQdD4sXuWUj7gPos1EAACH5BAkBAAIALAAAAAAwADAAAAJrlI+py+0Po5y02ouz3rz7D4ZiCIxUaU4Amjrr+rDg+7ojXTdyh+e7kPP0egjabGg0EIVImHLJa6KaUam1aqVynNNsUvPTQjO/J84cFA3RzlaJO2495TF63Y7P6/f8vv8PGCg4SFhoeIg4UQAAIfkEBQEAAgAsAAAAADAAMAAAAnaUj6nL7Q+jXGDaW6+GeXsFdFL4UaITnuVBPunKtHGqwoKc0LjN7rdes70QQB/v1ykOj72kMghbPpm51pRKtBaxoteV2SUpsT/Dk0Y+A8lmNZSnZlfH8iy93lzj5+g93+gXKDhIWGh4iJiouMjY6PgIGSk5eVgAADs=';
		d.body.appendChild(z);
		function R(o,m){return Math.max(Math.min(o+(r()-.5)*400,m-50),50)}
		function A(){
			var x=R(a,w.innerWidth),y=R(b,w.innerHeight),
				d=5*Math.sqrt((a-x)*(a-x)+(b-y)*(b-y));
			zs.opacity=n;n=1;
			zs.transition=zs.webkitTransition=d/1e3+'s linear';
			zs.transform=zs.webkitTransform='translate('+x+'px,'+y+'px)';
			i.style.transform=i.style.webkitTransform=(a>x)?'':'scaleX(-1)';
			a=x;b=y;
			setTimeout(A,d);
		};setTimeout(A,r()*3e3);
		})();
	}
</script>
